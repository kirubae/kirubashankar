<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image Resizer, Cropper & Compressor</title>
    <link rel="stylesheet" href="static/styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Image Resizer, Cropper & Compressor</h1>
            <p>Upload an image to resize, crop, or compress it</p>
        </header>

        <!-- Upload Area -->
        <div class="upload-area" id="upload-area">
            <div class="upload-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                    <polyline points="17 8 12 3 7 8"/>
                    <line x1="12" y1="3" x2="12" y2="15"/>
                </svg>
            </div>
            <h2>Drop your image here</h2>
            <p>or click to browse</p>
            <button class="upload-btn" id="upload-btn">Choose File</button>
            <input type="file" id="file-input" accept="image/*">
        </div>

        <!-- Editor -->
        <div class="editor" id="editor">
            <div class="editor-main">
                <!-- Preview Section -->
                <div class="preview-section">
                    <div class="preview-header">
                        <h3>Preview</h3>
                        <div class="zoom-controls">
                            <button id="zoom-out">−</button>
                            <span id="zoom-level">100%</span>
                            <button id="zoom-in">+</button>
                            <button id="zoom-fit">Fit</button>
                        </div>
                    </div>
                    <div class="preview-container" id="preview-container">
                        <div class="preview-wrapper" id="preview-wrapper">
                            <img id="preview-image" src="" alt="Preview">
                            <div class="crop-overlay" id="crop-overlay">
                                <div class="crop-box" id="crop-box">
                                    <div class="crop-handle nw" data-handle="nw"></div>
                                    <div class="crop-handle n" data-handle="n"></div>
                                    <div class="crop-handle ne" data-handle="ne"></div>
                                    <div class="crop-handle w" data-handle="w"></div>
                                    <div class="crop-handle e" data-handle="e"></div>
                                    <div class="crop-handle sw" data-handle="sw"></div>
                                    <div class="crop-handle s" data-handle="s"></div>
                                    <div class="crop-handle se" data-handle="se"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="original-info">
                        <div class="info-item">
                            <label>Format</label>
                            <span id="info-format">-</span>
                        </div>
                        <div class="info-item">
                            <label>Dimensions</label>
                            <span id="info-dimensions">-</span>
                        </div>
                        <div class="info-item">
                            <label>File Size</label>
                            <span id="info-size">-</span>
                        </div>
                    </div>
                </div>

                <!-- Controls Section -->
                <div class="controls-section">
                    <div class="tabs">
                        <button class="tab active" data-tab="resize">Resize</button>
                        <button class="tab" data-tab="crop">Crop</button>
                        <button class="tab" data-tab="compress">Compress</button>
                    </div>

                    <!-- Resize Tab -->
                    <div class="tab-content active" id="resize-tab">
                        <div class="control-group">
                            <label>Dimensions</label>
                            <div class="input-row">
                                <div class="input-group">
                                    <label>Width (px)</label>
                                    <input type="number" id="resize-width" min="1" max="10000">
                                </div>
                                <button class="link-btn active" id="aspect-lock" title="Lock aspect ratio">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                                        <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
                                    </svg>
                                </button>
                                <div class="input-group">
                                    <label>Height (px)</label>
                                    <input type="number" id="resize-height" min="1" max="10000">
                                </div>
                            </div>
                        </div>

                        <div class="control-group">
                            <label>Quick Presets</label>
                            <div class="presets">
                                <button class="preset-btn" data-width="1920" data-height="1080">1920×1080</button>
                                <button class="preset-btn" data-width="1080" data-height="1080">1080×1080</button>
                                <button class="preset-btn" data-width="1200" data-height="628">1200×628</button>
                                <button class="preset-btn" data-width="800" data-height="800">800×800</button>
                            </div>
                        </div>

                        <div class="control-group">
                            <div class="toggle-row">
                                <span class="toggle-label">Don't upscale</span>
                                <label class="toggle">
                                    <input type="checkbox" id="no-upscale" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Crop Tab -->
                    <div class="tab-content" id="crop-tab">
                        <div class="control-group">
                            <label>Aspect Ratio</label>
                            <div class="aspect-presets">
                                <button class="preset-btn" data-ratio="free">Free</button>
                                <button class="preset-btn active" data-ratio="1:1">1:1</button>
                                <button class="preset-btn" data-ratio="4:3">4:3</button>
                                <button class="preset-btn" data-ratio="16:9">16:9</button>
                                <button class="preset-btn" data-ratio="3:2">3:2</button>
                                <button class="preset-btn" data-ratio="9:16">9:16</button>
                                <button class="preset-btn" data-ratio="custom">Custom</button>
                            </div>
                            <div class="custom-ratio-inputs" id="custom-ratio-inputs" style="display: none;">
                                <div class="input-row" style="margin-top: 12px;">
                                    <div class="input-group">
                                        <label>Width Ratio</label>
                                        <input type="number" id="custom-ratio-w" min="0.01" max="100" step="0.01" value="1">
                                    </div>
                                    <span style="margin-top: 18px; color: #86868b;">:</span>
                                    <div class="input-group">
                                        <label>Height Ratio</label>
                                        <input type="number" id="custom-ratio-h" min="0.01" max="100" step="0.01" value="1">
                                    </div>
                                    <button class="btn btn-secondary" id="apply-custom-ratio" style="margin-top: 14px; padding: 8px 12px;">Apply</button>
                                </div>
                            </div>
                        </div>

                        <div class="control-group">
                            <label>Crop Area (px)</label>
                            <div class="input-row">
                                <div class="input-group">
                                    <label>Width</label>
                                    <input type="number" id="crop-width" min="1" max="10000" readonly style="background: #f5f5f7;">
                                </div>
                                <div class="input-group">
                                    <label>Height</label>
                                    <input type="number" id="crop-height" min="1" max="10000" readonly style="background: #f5f5f7;">
                                </div>
                            </div>
                        </div>

                        <div class="control-group">
                            <div class="toggle-row" style="border-bottom: none; padding-bottom: 8px;">
                                <span class="toggle-label">Resize output</span>
                                <label class="toggle">
                                    <input type="checkbox" id="crop-resize-enabled">
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                            <div id="crop-resize-options" style="display: none;">
                                <div class="input-row">
                                    <div class="input-group">
                                        <label>Output Width (px)</label>
                                        <input type="number" id="crop-output-width" min="1" max="10000" placeholder="e.g., 1000">
                                    </div>
                                    <div class="input-group">
                                        <label>Output Height (px)</label>
                                        <input type="number" id="crop-output-height" min="1" max="10000" placeholder="e.g., 429">
                                    </div>
                                </div>
                                <p style="font-size: 11px; color: #86868b; margin-top: 8px;">
                                    Height auto-calculates from aspect ratio. Edit either field.
                                </p>
                            </div>
                        </div>

                        <button class="center-crop-btn" id="center-crop">Center Crop</button>
                    </div>

                    <!-- Compress Tab -->
                    <div class="tab-content" id="compress-tab">
                        <div class="control-group">
                            <label>Output Format</label>
                            <select id="output-format">
                                <option value="original">Keep Original</option>
                                <option value="image/jpeg">JPEG</option>
                                <option value="image/webp">WebP</option>
                                <option value="image/png">PNG</option>
                            </select>
                        </div>

                        <div class="control-group" id="quality-group">
                            <label>Quality</label>
                            <div class="slider-container">
                                <div class="slider-header">
                                    <span>Lower = smaller file</span>
                                    <span class="slider-value" id="quality-value">80%</span>
                                </div>
                                <input type="range" id="quality-slider" min="1" max="100" value="80">
                            </div>
                        </div>

                        <div class="control-group">
                            <label>Max Dimension (optional)</label>
                            <input type="number" id="max-dimension" placeholder="e.g., 1920" min="1" max="10000">
                            <p style="font-size: 12px; color: #86868b; margin-top: 4px;">
                                Limit largest side to this size
                            </p>
                        </div>

                        <div class="control-group">
                            <div class="toggle-row">
                                <span class="toggle-label">Strip metadata</span>
                                <label class="toggle">
                                    <input type="checkbox" id="strip-metadata" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Bottom Bar -->
            <div class="bottom-bar">
                <div class="output-summary">
                    <div class="info-item">
                        <label>Output Format</label>
                        <span id="output-format-display">-</span>
                    </div>
                    <div class="info-item">
                        <label>Output Size</label>
                        <span id="output-dimensions">-</span>
                    </div>
                    <div class="info-item">
                        <label>Est. File Size</label>
                        <span id="output-size">-</span>
                    </div>
                </div>
                <div class="action-buttons">
                    <button class="btn btn-secondary" id="reset-btn">Reset</button>
                    <button class="btn btn-primary" id="download-btn">Download</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loading">
        <div class="spinner"></div>
    </div>

    <script src="static/script.js"></script>
</body>
</html>
